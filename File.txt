Step 1: Create the VPC

Go to Amazon Web Services Management Console.

Open VPC service.

Click Create VPC.

Choose VPC only.

Enter:

Name: Custom-VPC

IPv4 CIDR block: 10.0.0.0/16

Click Create VPC.

ðŸ”¹ Step 2: Create Subnets (Public & Private)

Create subnets in the same Availability Zone.

Example:

Public Subnet: 10.0.1.0/24 (AZ-A)

Private Subnet: 10.0.2.0/24 (AZ-A)

Steps:

Go to Subnets â†’ Create subnet.

Select your VPC.

Choose Availability Zone.

Enter CIDR block.

Click Create subnet.

ðŸ”¹ Step 3: Create an Internet Gateway (IGW)

Go to Internet Gateways.

Click Create internet gateway.

Name it Custom-IGW.

Click Create.

Click Attach to VPC.

Select your VPC.

ðŸ”¹ Step 4: Create Route Tables

You need separate route tables.

Public Route Table

Go to Route Tables â†’ Create route table.

Select your VPC.

Click Routes â†’ Edit routes.

Add:

Destination: 0.0.0.0/0

Target: Internet Gateway

Save.

Click Subnet associations.

Associate with Public Subnet.

Private Route Table

Create route table.

Select VPC.

Keep default local route only.

Associate with Private Subnet.

ðŸ”¹ Step 5: Enable Auto-Assign Public IP (Public Subnet)

Select Public Subnet.

Click Edit subnet settings.

Enable Auto-assign public IPv4 address.

Save.

ðŸ”¹ Step 6: Configure Security Groups

Go to Security Groups.

Click Create security group.

Add inbound rules:

HTTP (80)

HTTPS (443)

SSH (22) from trusted IP

Attach to EC2 instances.

ðŸ”¹ Step 7: Launch EC2 Instances

Go to EC2 service.

Launch instance:

Public EC2 â†’ Select Public Subnet

Private EC2 â†’ Select Private Subnet

Attach correct Security Group.

ðŸ”¹ Step 8: Test the Setup

Public EC2 â†’ Internet access âœ”

Private EC2 â†’ Internet via NAT âœ”

Private EC2 â†’ No direct inbound access âœ”
